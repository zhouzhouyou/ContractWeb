<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta content="width=device-width, initial-scale=1" name="viewport">
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/my-form.css" rel="stylesheet">
		<link href="css/gijgo.min.css" rel="stylesheet">
		<link href="css/fileinput.min.css" rel="stylesheet">
		<link href="css/theme.min.css" rel="stylesheet">
		<link crossorigin="anonymous" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" rel="stylesheet">
		
		<script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
		<script src="js/js.cookie-2.2.1.min.js" type="text/javascript"></script>
		<script src="js/bootstrap.bundle.min.js" type="text/javascript"></script>
		<script src="js/piexif.min.js" type="text/javascript"></script>
		<script src="js/purify.min.js" type="text/javascript"></script>
		<script src="js/fileinput.min.js" type="text/javascript"></script>
		<script src="js/locales/zh.js" type="text/javascript"></script>
		<script src="js/common.js" type="text/javascript"></script>
		<script src="themes/fas/theme.min.js" type="text/javascript"></script>
		<script src="js/gijgo.min.js" type="text/javascript"></script>
		<script src="js/messages.zh-cn.min.js" type="text/javascript"></script>
	</head>
	<style type="text/css">
		.clearfix:before, .clearfix:after{
			content: "";
			display: table;
		}
		.clearfix:after{
			clear: both;
		}
		.clearfix{
			zoom: 1;
		}
	</style>
	<body>
		<div id="header"></div>
		<div>
			<span class="clearfix" style="margin: 20px;">
				<input autofocus class="form-control" id="name" type="text" style="float: left; width: 20%; margin-left: 20px;"required placeholder="查询合同" style="display: inline; width: 20%;">
				<button type="button" class="btn btn-primary" style="float: left; margin-left: 20px;">查询</button>
			</span>
			<div class="text-center" style="margin-top: 50px;">
				<table class="table table-hover" style="width: 80%; margin-top: 20px;" align="center" id="show_table">
					<thead>
					<tr>
						<th scope="col">合同名称</th>
						<th scope="col">起草时间</th>
						<th scope="col">结束时间</th>
						<th scope="col">确定</th>
					</tr>
					</thead>
					<tbody id="customerBody">
						<tr>
							<td scope="col">dsadsa1</td>
							<td scope="col">2019-2-2</td>
							<td scope="col">2019-2-2</td>
						</tr>
						<tr>
							<td scope="col">dsadsa2</td>
							<td scope="col">2019-2-3</td>
							<td scope="col">2019-2-2</td>
						</tr>
						<tr>
							<td scope="col">dsadsa3</td>
							<td scope="col">2019-2-4</td>
							<td scope="col">2019-2-2</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="modal fade bd-example-modal-xl" id="customerModal" tabindex="-1" role="dialog" data-backdrop="static" aria-labelledby="staticBackdropLabel" aria-hidden="true">
		    <div class="modal-dialog modal-dialog-scrollable modal-xl" >
		        <div class="modal-content">
		            <div class="modal-header" style="padding: 0px; font-size: 16px;">
		                <h4 class="modal-title" id="show_name"></h4>
		            </div>
		            <div class="modal-content">
		                <div class="modal-body">
							<div style="margin: 10px auto; text-align: center; width: 80%;" class="clearfix">
									<h4>会签人员</h4>
									<div id="countersign_left" style="overflow: auto; width: 45%; height: 100px; float: left; margin-right: 10px;">
										<button type="button" class="btn btn-outline-primary countersign_button" style="width: 45%;">张三</button>
										<button type="button" class="btn btn-outline-primary countersign_button" style="width: 45%;">李四</button>
										<button type="button" class="btn btn-outline-primary countersign_button" style="width: 45%;">王五</button>
										
										
										
									</div>
									<div id="countersign_right" style="overflow: auto; width: 45%; height: 100px; float: left; margin-right: 10px;">
										
										
									</div>
							</div>
							<div style="margin: 10px auto; text-align: center; width: 80%;" class="clearfix">
									<h4>审批人员</h4>
									<div id="finalize_left" style="overflow: auto; width: 45%; height: 100px; float: left; margin-right: 10px;">
										<button type="button" class="btn btn-outline-secondary finalize_button" style="width: 45%;">赵六</button>
										<button type="button" class="btn btn-outline-secondary finalize_button" style="width: 45%;">ABC</button>
										<button type="button" class="btn btn-outline-secondary finalize_button" style="width: 45%;">DEF</button>
										<button type="button" class="btn btn-outline-secondary finalize_button" style="width: 45%;">GHI</button>
									</div>
									<div id="finalize_right" style="overflow: auto; width: 45%; height: 100px; float: left; margin-right: 10px;">
										
										
										
										
									</div>
							</div>
							<div style="margin: 10px auto; text-align: center; width: 80%;" class="clearfix">
									<h4>签订人员</h4>
									<div id="approve_left" style="overflow: auto; width: 45%; height: 100px; float: left; margin-right: 10px;">
										<button type="button" class="btn btn-outline-warning approve_button" style="width: 45%;">JKL</button>
										<button type="button" class="btn btn-outline-warning approve_button" style="width: 45%;">MNO</button>
										<button type="button" class="btn btn-outline-warning approve_button" style="width: 45%;">PQR</button>
										<button type="button" class="btn btn-outline-warning approve_button" style="width: 45%;">STU</button>
										
										
										
									</div>
									<div id="approve_right" style="overflow: auto; width: 45%; height: 100px; float: left; margin-right: 10px;">
										
										
										
									</div>
							</div>
						</div>
		            </div>
		            <div class="modal-footer">
						<button class="btn btn-danger" data-dismiss="modal" type="button" id="submit">提交</button>
		                <button class="btn btn-secondary" data-dismiss="modal" type="button">关闭</button>
						
		            </div>
		        </div>
		    </div>
		</div>
		<nav aria-label="..." style="float: right; margin-top:10px ;">
		  <ul class="pagination">
		    <li class="page-item disabled">
		      <span class="page-link">Previous</span>
		    </li>
		    <li class="page-item"><a class="page-link" href="#">1</a></li>
		    <li class="page-item active" aria-current="page">
		      <span class="page-link">
		        2
		        <span class="sr-only">(current)</span>
		      </span>
		    </li>
		    <li class="page-item"><a class="page-link" href="#">3</a></li>
		    <li class="page-item">
		      <a class="page-link" href="#">Next</a>
		    </li>
		  </ul>
		</nav>
		<script type="text/javascript" src="js/nav.js"></script>
		<script>
			$(function() {
				var array = new Array();
				let btn = $("#btn");
				btn.click(function() {
					
				})
				 
				$("#show_table tr").click(function(){
					var contract_name = $(this).find("td").eq(0).text();
					console.log(contract_name);
					$("#show_name").text(contract_name);
					$("#customerModal").modal();
					
				});
				
				$("#submit").click(function(){
					if($("#customerModal").find("textarea").eq(1).val() == ""){
						alert("请输入意见");
					}
				});
				
				
				let countersign_button_click = function(){
					let select_button = $(this);
					let parent = select_button.parent();
					console.log(parent.attr("id"));
					$(this).remove().unbind("click");
					
					if(parent.attr("id") == "countersign_right"){
						$("#countersign_left").append(select_button);
						array.splice(jQuery.inArray(select_button.text(),array),1);
						// str = "删除之后的" + get_person();
						$(this).click(countersign_button_click);
						// console.log(str);
					}
					else if(parent.attr("id") == "countersign_left"){
						$("#countersign_right").append(select_button);
						array.push(select_button.text());
						$(this).click(countersign_button_click);
						// str = "添加之后的" + get_person();
						// console.log(str);
					}
				}
				
				let finalize_button_click = function(){
					let select_button = $(this);
					let parent = select_button.parent();
					console.log(parent.attr("id"));
					$(this).remove().unbind("click");
					
					if(parent.attr("id") == "finalize_right"){
						$("#finalize_left").append(select_button);
						array.splice(jQuery.inArray(select_button.text(),array),1);
						// str = "删除之后的" + get_person();
						// console.log(str);
						$(this).click(finalize_button_click);
					}
					else if(parent.attr("id") == "finalize_left"){
						$("#finalize_right").append(select_button);
						array.push(select_button.text());
						$(this).click(finalize_button_click);
						// str = "添加之后的" + get_person();
						// console.log(str);
					}
				}
				
				let approve_button_click = function(){
					let select_button = $(this);
					let parent = select_button.parent();
					console.log(parent.attr("id"));
					$(this).remove().unbind("click");
					
					if(parent.attr("id") == "approve_right"){
						$("#approve_left").append(select_button);
						array.splice(jQuery.inArray(select_button.text(),array),1);
						// str = "删除之后的" + get_person();
						// console.log(str);
						$(this).click(approve_button_click);
					}
					else if(parent.attr("id") == "approve_left"){
						$("#approve_right").append(select_button);
						array.push(select_button.text());
						$(this).click(approve_button_click);
						// str = "添加之后的" + get_person();
						// console.log(str);
					}
				}
				
				$(".countersign_button").click(countersign_button_click);
				$(".finalize_button").click(finalize_button_click);
				$(".approve_button").click(approve_button_click);
				
				function get_person(){
					str = ""
					for(let i = 0; i < array.length; i++){
						str += array[i] + " ";
					}
					// console.log(str);
					return array;
				}
				
				
				
				
				
			})
			
		</script>
	</body>
</html>
